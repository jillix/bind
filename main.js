define(function(){function f(a,b,c){var d=function(){c.scope[c.method].apply(c.scope,c.args)};a.addEventListener?a.addEventListener(b,d,c.useCapture||!1):a.attachEvent&&a.attachEvent(b,d)}function g(a,b){for(var c in b)if(b.hasOwnProperty(c)&&("object"===typeof a[c]||"undefined"===typeof a[c]))if("scope"!==c&&"object"===typeof b[c])if(a[c]instanceof Array)if(b[c]instanceof Array)for(var d=0,e=b[c].length;d<e;++d)a[c].push(b[c][d]);else a[c].push(b[c]);else b[c]instanceof Array?(b[c].push(a[c]),a[c]=b[c]):(a[c]||(a[c]={}),g(a[c],b[c]));else"undefined"===typeof a[c]&&(a[c]=b[c]);return a}function h(a){a=g(a,this);if("undefined"!==typeof a.val||"object"===typeof a.events)if(a.elm instanceof Document||a.elm instanceof Element||(a.elm=document),!(a.elm instanceof Document&&"string"!==typeof a.query)){if("string"==typeof a.query&&(a.elm=a.elm.querySelector(a.query),!a.elm))return;if("object"===typeof a.events)for(var b in a.events)if(a.events[b]instanceof Array)for(var c=0,d=a.events[b].length;c<d;++c)a.events[b][c].scope=a.events[b][c].scope||a.scope,f(a.elm,b,a.events[b][c]);else a.events[b].scope=a.events[b].scope||a.scope,f(a.elm,b,a.events[b]);if(a.val){if("object"===typeof a.filters||this.filters)for(var e in a.filters)i[e]&&(a.val=i[e](a.val,a.filters[e]));"string"===typeof a.attr?a.elm.setAttribute(a.attr,a.val):a.elm.innerHTML=a.val}}}var i={max:function(a,b){return a>b?b:a},min:function(a,b){return a<b?b:a},fixed:function(a,b){return a.toFixed(b)},maxChars:function(a,b){return a.length>b?a.substr(0,b):a},minChars:function(a,b){return a.length<b?"":a},"int":function(a,b){return parseInt(a,b||10)||0},"float":function(a){return parseFloat(a)||0},pre:function(a,b){return b+a},post:function(a,b){return a+b}};return function(a){var b=a||{};return function(a){if(a instanceof Array)for(var d=0,e=a.length;d<e;++d)h.call(b,a[d]);else h.call(b,a)}}});